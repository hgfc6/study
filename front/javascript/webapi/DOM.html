<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Web API DOM</title>
</head>
<body>
<div>
    JS DOM（JavaScript Document Object Model）是 JavaScript 操作网页内容的核心接口。<br>
    它允许开发者通过 JavaScript 动态地访问、修改、添加或删除 HTML 和 XML 文档中的元素、属性和样式。<br>
    DOM 将整个文档表示为一个树形结构，每个节点都是一个对象，开发者可以通过这些对象与网页进行交互。
</div>
<br>

<div>
    常用 DOM 操作<br>
    获取元素：<br><br>

    document.getElementById(id)：通过元素的 id 获取元素。<br>
    document.getElementsByClassName(className)：通过类名获取元素集合。<br>
    document.getElementsByTagName(tagName)：通过标签名获取元素集合。<br>
    document.querySelector(selector)：通过 CSS 选择器获取第一个匹配的元素。<br>
    document.querySelectorAll(selector)：通过 CSS 选择器获取所有匹配的元素。<br>
    修改元素内容：<br><br>

    element.innerHTML：获取或设置元素的 HTML 内容。<br>
    element.textContent：获取或设置元素的文本内容。<br>
    修改元素属性：<br><br>

    element.setAttribute(name, value)：设置元素的属性。<br>
    element.getAttribute(name)：获取元素的属性值。<br>
    element.removeAttribute(name)：移除元素的属性。<br>
    添加和删除元素：<br><br>

    document.createElement(tagName)：创建一个新的元素。<br>
    parentElement.appendChild(newElement)：将新元素添加到父元素的子节点末尾。<br>
    parentElement.removeChild(childElement)：从父元素中移除子元素。<br>
    修改样式：<br><br>

    element.style.property = value：直接修改元素的样式属性。<br>
    element.classList.add(className)：为元素添加一个类。<br>
    element.classList.remove(className)：从元素中移除一个类。<br>
    element.classList.toggle(className)：切换元素的类。
</div>
<br>

<h1 id="title">Hello World</h1>
<p class="content">This is a paragraph.</p>
<button onclick="changeContent()">Change Content</button>

<script>
    function changeContent() {
        // 获取元素
        const title = document.getElementById('title');
        const content = document.querySelector('.content');

        // 修改元素内容
        title.textContent = 'Welcome to JS DOM!';
        content.innerHTML = 'This content has been changed dynamically.';

        // 修改样式
        title.style.color = 'blue';
        content.classList.add('highlight');
    }
</script>

<div>
    <br>
    <br>
    <br>
    DOM（文档对象模型）事件监听是指在网页中通过JavaScript来监听和响应用户或浏览器触发的各种事件。事件监听机制允许开发者在特定事件发生时执行相应的代码，从而实现交互功能。<br>
    <button id="listener">点击</button>
    <div id="listener123"></div>
</div>
<script>
    var ele = document.querySelector("#listener");

    function handclick(event) {
        document.getElementById("listener123").innerText = event.clientX + "--" + event.clientY
    }

    // 增删事件
    ele.addEventListener("click", handclick)
    ele.removeEventListener("click", handclick)
    ele.addEventListener("click", handclick)

    // 事件冒泡与触发
    // 事件冒泡和事件捕获是DOM事件传播的两种机制，它们决定了事件在DOM树中的传播顺序。

    /*事件捕获（Event Capturing）
    事件捕获是从最外层的祖先元素开始，逐级向下传播到目标元素的过程。在这个过程中，事件会从document对象开始，沿着DOM树向下传播，直到到达触发事件的目标元素。

    事件冒泡（Event Bubbling）
    事件冒泡是从目标元素开始，逐级向上传播到最外层的祖先元素的过程。在这个过程中，事件会从目标元素开始，沿着DOM树向上传播，直到到达document对象。

    事件传播的三个阶段
    捕获阶段（Capture Phase）：事件从document对象向下传播到目标元素。
    目标阶段（Target Phase）：事件到达目标元素。
    冒泡阶段（Bubble Phase）：事件从目标元素向上传播到document对象。
    如何控制事件传播
        在JavaScript中，你可以通过addEventListener方法来指定事件是在捕获阶段还是冒泡阶段处理。addEventListener方法的第三个参数是一个布尔值，
        用于指定事件处理程序是在捕获阶段（true）还是冒泡阶段（false，默认值）执行。

        element.addEventListener('click', function(event) {
            console.log('事件捕获阶段');
        }, true);

        element.addEventListener('click', function(event) {
            console.log('事件冒泡阶段');
        }, false);

        阻止事件传播
        你可以使用event.stopPropagation()方法来阻止事件继续传播。这会阻止事件在捕获或冒泡阶段的进一步传播。

        element.addEventListener('click', function(event) {
            event.stopPropagation();
            console.log('事件传播被阻止');
        });

        阻止默认行为
        你可以使用event.preventDefault()方法来阻止事件的默认行为。例如，阻止表单提交或链接跳转。

        element.addEventListener('click', function(event) {
            event.preventDefault();
            console.log('默认行为被阻止');
        });

        总结
        事件捕获：从外向内传播。
        事件冒泡：从内向外传播。
        事件传播的三个阶段：捕获、目标、冒泡。
        控制事件传播：使用addEventListener的第三个参数。
        阻止事件传播：使用event.stopPropagation()。
        阻止默认行为：使用event.preventDefault()。
        理解事件冒泡和捕获机制有助于更好地控制和管理DOM事件。*/
    document.body.addEventListener('click', function () {
        console.log('Body clicked (capture phase)');
    }, true);

    document.body.addEventListener('click', function () {
        console.log('Body clicked (bubble phase)');
    });
</script>
<br>
<br>
<br>
<div>
    常用事件类型<br>
    🖱️ 鼠标事件<br><br>

    click：鼠标单击（左键点击后抬起）<br>
    dblclick：鼠标双击（快速连续两次点击）<br>
    mouseover：鼠标指针移入元素区域<br>
    mouseout：鼠标指针移出元素区域<br>
    mousedown：鼠标按键按下（无需抬起）<br>
    mouseup：鼠标按键释放<br><br>
    ⌨️ 键盘事件<br><br>

    keydown：键盘按键被按下（任何键都会触发）<br>
    keyup：键盘按键被释放<br>
    keypress：字符键被按下（主要针对可打印字符）<br><br>
    📝 表单事件<br><br>

    submit：表单提交时触发<br>
    change：表单元素值改变且失去焦点后触发（如输入框）<br>
    focus：元素获得焦点（如点击输入框）<br>
    blur：元素失去焦点（如点击其他区域）<br><br>
    🖼️ 窗口事件<br><br>

    load：页面及所有资源加载完成时触发<br>
    resize：浏览器窗口大小改变时触发<br>
    scroll：页面或元素发生滚动时触发<br><br>
    使用技巧：<br><br>

    事件传播：注意事件冒泡（bubble）和捕获（capture）阶段<br>
    性能优化：高频事件（如scroll/resize）建议使用节流（throttle）<br>
    兼容性：移动端建议使用 touch 事件替代部分鼠标事件<br>
    弃用注意：keypress 事件已被现代标准废弃，推荐使用 keydown 代替<br>
</div>
</body>
</html>